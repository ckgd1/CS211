#include <iostream>
#include <stdexcept>
#include <string>

using namespace std;

int cstr_i(char* cstr)
{
  string m = "not an integer";
  int s = 0;
  int i;
  for( i = 0; cstr[i] != '\0'; i++)
    if (cstr[i] > '9' || cstr[i] < '0')
      throw m;
  s = s *10 + cstr[i] - '0';
 
}



int main()
{
  string choice;
  bool bad;
  int num;

  do 
    {

      bad = false;
      cout << "Enter an integer number: ";
      cin >> choice;
      try 
	{
	  cstr_i(choice);
	}
      catch(string errormsg)
	{
	  cout << errormsg << endl;
	  bad = true;
	}
    } 
  while (bad == true);
  cout << "After catch " << endl;
  cout << "num = " << num << endl;
 
  return 0;
}
